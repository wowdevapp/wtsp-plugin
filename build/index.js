(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.element,n=window.wp.apiFetch;var s=e.n(n);window.wp.url;const o=window.ReactJSXRuntime,l=(0,t.createContext)();function a({children:e}){const[n,a]=(0,t.useState)(null),[i,r]=(0,t.useState)(!0),[u,c]=(0,t.useState)(null),g=async()=>{try{const e=await s()({path:"/my-plugin/v1/settings"});a(e),c(null)}catch(e){c(e.message)}finally{r(!1)}};return(0,t.useEffect)((()=>{g()}),[]),(0,o.jsx)(l.Provider,{value:{settings:n,loading:i,error:u,updateSettings:async e=>{try{const t=await s()({path:"/my-plugin/v1/settings",method:"POST",data:e});return a(t),{success:!0}}catch(e){return c(e.message),{success:!1,error:e.message}}},refreshSettings:g,setSettings:a},children:e})}const i=window.wp.components,r=window.wp.i18n;function u(){const{settings:e,loading:n,error:s,updateSettings:a,setSettings:u}=(0,t.useContext)(l),[c,g]=(0,t.useState)(!1),[p,d]=(0,t.useState)("");if(n)return(0,o.jsx)("div",{children:"Loading settings..."});if(s)return(0,o.jsx)(i.Notice,{status:"error",children:s});const h=(t,n)=>{u({...e,[t]:n})};return(0,o.jsx)("form",{onSubmit:async t=>{t.preventDefault(),g(!0),d("");const n=await a(e);g(!1),d(n.success?"Settings saved successfully!":"Failed to save settings"),setTimeout((()=>{d("")}),3e3)},children:(0,o.jsxs)(i.Card,{children:[(0,o.jsx)(i.CardHeader,{children:(0,o.jsx)("h2",{children:(0,r.__)("WhatsApp Button Settings","my-plugin")})}),(0,o.jsxs)(i.CardBody,{children:[(0,o.jsx)(i.TextControl,{label:(0,r.__)("WhatsApp Number","my-plugin"),help:(0,r.__)("Include country code (e.g., +1234567890)","my-plugin"),value:e.whatsapp_number,onChange:e=>h("whatsapp_number",e)}),(0,o.jsx)(i.TextareaControl,{label:(0,r.__)("Default Message","my-plugin"),help:(0,r.__)("Message that will be pre-filled in WhatsApp","my-plugin"),value:e.whatsapp_message,onChange:e=>h("whatsapp_message",e)}),(0,o.jsxs)("div",{className:"color-picker-field",children:[(0,o.jsx)("label",{children:(0,r.__)("Button Color","my-plugin")}),(0,o.jsx)(i.ColorPicker,{color:e.button_color,onChangeComplete:e=>h("button_color",e.hex)})]}),(0,o.jsx)(i.SelectControl,{label:(0,r.__)("Button Position","my-plugin"),value:e.button_position,options:[{label:"Right",value:"right"},{label:"Left",value:"left"}],onChange:e=>h("button_position",e)}),(0,o.jsx)(i.SelectControl,{label:(0,r.__)("Button Size","my-plugin"),value:e.button_size,options:[{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}],onChange:e=>h("button_size",e)}),(0,o.jsx)(i.ToggleControl,{label:(0,r.__)("Show on Mobile","my-plugin"),checked:e.show_on_mobile,onChange:e=>h("show_on_mobile",e)}),(0,o.jsx)(i.ToggleControl,{label:(0,r.__)("Show on Desktop","my-plugin"),checked:e.show_on_desktop,onChange:e=>h("show_on_desktop",e)}),(0,o.jsx)(i.Button,{isPrimary:!0,type:"submit",isBusy:c,children:(0,r.__)("Save Settings","my-plugin")})]})]})})}function c(){return(0,o.jsx)(a,{children:(0,o.jsx)("div",{className:"my-plugin-settings-page",children:(0,o.jsx)(u,{})})})}(0,t.render)((0,o.jsx)(c,{}),document.getElementById("my-plugin-root"))})();