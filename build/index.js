(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var l in t)e.o(t,l)&&!e.o(n,l)&&Object.defineProperty(n,l,{enumerable:!0,get:t[l]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.element,t=window.wp.apiFetch;var l=e.n(t);window.wp.url;const s=window.ReactJSXRuntime,o=(0,n.createContext)();function a({children:e}){const[t,a]=(0,n.useState)(null),[i,r]=(0,n.useState)(!0),[u,c]=(0,n.useState)(null),d=async()=>{try{const e=await l()({path:"/my-plugin/v1/settings"});a(e),c(null)}catch(e){c(e.message)}finally{r(!1)}};return(0,n.useEffect)((()=>{d()}),[]),(0,s.jsx)(o.Provider,{value:{settings:t,loading:i,error:u,updateSettings:async e=>{try{const n=await l()({path:"/my-plugin/v1/settings",method:"POST",data:e});return a(n),{success:!0}}catch(e){return c(e.message),{success:!1,error:e.message}}},refreshSettings:d,setSettings:a},children:e})}const i=window.wp.components,r=window.wp.i18n;function u(){const{settings:e,loading:t,error:l,updateSettings:a,setSettings:u}=(0,n.useContext)(o),[c,d]=(0,n.useState)(!1),[g,p]=(0,n.useState)("");if(t)return(0,s.jsx)("div",{children:"Loading settings..."});if(l)return(0,s.jsx)(i.Notice,{status:"error",children:l});const h=(n,t)=>{u({...e,[n]:t})};return(0,s.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),d(!0),p("");const t=await a(e);d(!1),p(t.success?"Settings saved successfully!":"Failed to save settings"),setTimeout((()=>{p("")}),3e3)},children:[(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsx)("h2",{children:(0,r.__)("WhatsApp Button Settings","my-plugin")})}),(0,s.jsxs)(i.CardBody,{children:[(0,s.jsx)(i.TextControl,{label:(0,r.__)("WhatsApp Number","my-plugin"),help:(0,r.__)("Include country code (e.g., +1234567890)","my-plugin"),value:e.whatsapp_number,onChange:e=>h("whatsapp_number",e)}),(0,s.jsx)(i.TextareaControl,{label:(0,r.__)("Default Message","my-plugin"),help:(0,r.__)("Message that will be pre-filled in WhatsApp","my-plugin"),value:e.whatsapp_message,onChange:e=>h("whatsapp_message",e)}),(0,s.jsxs)("div",{className:"color-picker-field",children:[(0,s.jsx)("label",{children:(0,r.__)("Button Color","my-plugin")}),(0,s.jsx)(i.ColorPicker,{color:e.button_color,onChangeComplete:e=>h("button_color",e.hex)})]}),(0,s.jsx)(i.SelectControl,{label:(0,r.__)("Button Position","my-plugin"),value:e.button_position,options:[{label:"Right",value:"right"},{label:"Left",value:"left"}],onChange:e=>h("button_position",e)}),(0,s.jsx)(i.SelectControl,{label:(0,r.__)("Button Size","my-plugin"),value:e.button_size,options:[{label:"Small",value:"small"},{label:"Medium",value:"medium"},{label:"Large",value:"large"}],onChange:e=>h("button_size",e)}),(0,s.jsx)(i.ToggleControl,{label:(0,r.__)("Show on Mobile","my-plugin"),checked:e.show_on_mobile,onChange:e=>h("show_on_mobile",e)}),(0,s.jsx)(i.ToggleControl,{label:(0,r.__)("Show on Desktop","my-plugin"),checked:e.show_on_desktop,onChange:e=>h("show_on_desktop",e)}),(0,s.jsx)(i.Button,{isPrimary:!0,type:"submit",isBusy:c,children:(0,r.__)("Save Settings","my-plugin")})]})]}),(0,s.jsxs)(i.Card,{children:[(0,s.jsx)(i.CardHeader,{children:(0,s.jsx)("h2",{children:(0,r.__)("Data Management","my-plugin")})}),(0,s.jsxs)(i.CardBody,{children:[(0,s.jsx)(i.ToggleControl,{label:(0,r.__)("Remove all data when uninstalling plugin","my-plugin"),help:(0,r.__)("When enabled, all plugin settings will be removed upon uninstall","my-plugin"),checked:e.remove_data_on_uninstall,onChange:e=>h("remove_data_on_uninstall",e)}),(0,s.jsxs)("div",{className:"data-removal-section",children:[(0,s.jsx)("h3",{children:(0,r.__)("Remove Data Now","my-plugin")}),(0,s.jsx)("p",{className:"description",children:(0,r.__)("This will immediately remove all plugin data. This action cannot be undone.","my-plugin")}),(0,s.jsx)(i.Button,{isDestructive:!0,onClick:()=>{window.confirm((0,r.__)("Are you sure you want to remove all plugin data? This cannot be undone.","my-plugin"))&&a({})},children:(0,r.__)("Remove All Data","my-plugin")})]})]})]})]})}function c(){return(0,s.jsx)(a,{children:(0,s.jsx)("div",{className:"my-plugin-settings-page",children:(0,s.jsx)(u,{})})})}(0,n.render)((0,s.jsx)(c,{}),document.getElementById("my-plugin-root"))})();